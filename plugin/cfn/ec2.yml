---

AWSTemplateFormatVersion: "2010-09-09"
Description: "Image Hashing EC2 Instance"
Parameters:
  pThornInstanceProfile:
    Type: String
  pThornInstanceSubnet:
    Type: AWS::EC2::Subnet::Id
  pThornKeyPair:
    Type: AWS::EC2::KeyPair::KeyName
  pThornAMI:
    Type: AWS::EC2::Image::Id
  pThornNameTag:
    Type: String
  pThornInstanceType:
    Type: String
Resources:
  # An EC2 instance to contain the THORN hashing algorithm endpoint
  ImageHashing:
    Type: AWS::EC2::Instance
    Properties: 
      ImageId: !Ref pThornAMI
      KeyName: !Ref pThornKeyPair
      Tenancy: default
      IamInstanceProfile: !Ref pThornInstanceProfile 
      InstanceType: !Ref pThornInstanceType
      SubnetId: !Ref pThornInstanceSubnet
      Tags:
        - Key: Name
          Value: !Ref pThornNameTag
